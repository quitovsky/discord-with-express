# discord-with-express (TypeScript)

Изменения в v2:
- Небольшой рефактор всего кода и структуры проекта
- Маршруты Express вынесены в папку routes как отдельные модули
- Изменена структура модулей. Теперь каждый модуль является классом и имеет обязательную асинхронную (Promise\<void>) функцию init
- Исправлены проблемы с асинхронностью (модули могли загружаться вразнобой, из-за чего, например, могли не регистрироваться некоторые ивенты)
- Изменен тестовый запрос /notify (вместо уведомления в канал, отправляет сообщение указанному пользователю)

Пример модульного соединения между собой Discord (discord.js) и ExpressJS, а также разделения всех обработчиков событий на отдельные файлы.

Установка:
- Переименовать .env.example в .env
- Вставить токен бота в .env файл
- Выполнить установку зависимостей (npm i)

Запуск (один из вариантов):
- nodemon index.ts (требуется установка зависимостей: nodemon, ts-node и соответственно typescript)

Создание ивентов:
- В папке events создать файл с расширением .ts (название любое)
- Создать функцию init и экспортировать её (export function init или export async function init)
- В тело функции init вписать всё необходимое для работы события (например, State.client.on, где State.client - это объект клиента Discord)

С модулями и маршрутизацией аналогично - создавать модули в папке modules и routes соответственно.
